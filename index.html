<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Security-Policy" content="connect-src 'self' https://firestore.googleapis.com https://*.firebaseio.com https://api.emailjs.com https://*.emailjs.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.tailwindcss.com https://unpkg.com https://cdn.jsdelivr.net https://www.gstatic.com; img-src 'self' data: https:;">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Change The Channel</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/browser.min.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Eater&display=swap" rel="stylesheet">

<script type="module">
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';
  import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js';
  import { getFirestore, doc, setDoc, getDoc, updateDoc, collection, query, orderBy, limit, getDocs, increment, writeBatch } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js';

  // Replace with YOUR Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyC6OviZk47dYSrAN7k5AmOE-uetxQ6m0ZA",
    authDomain: "change-the-channel.firebaseapp.com",
    projectId: "change-the-channel",
    storageBucket: "change-the-channel.firebasestorage.app",
    messagingSenderId: "527107344659",
    appId: "1:527107344659:web:19640343676f6672e0f2e6"
  };

  const app = initializeApp(firebaseConfig);
  window.auth = getAuth(app);
  window.db = getFirestore(app);
  window.firebaseAuth = { signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged };
  window.firebaseDb = { doc, setDoc, getDoc, updateDoc, collection, query, orderBy, limit, getDocs, increment, writeBatch };
</script>

  <style>
 .eater-regular {
  font-family: "Eater", serif;
  font-weight: 400;
  font-style: normal;
}

    .tv-container {
      position: relative;
      border: 4px solid #ff6b00;
    }

    .spider-corner {
      position: absolute;
      width: 120px;
      height: 120px;
      background-image: url('https://files.catbox.moe/qkde9v.png');
      background-size: contain;
      background-repeat: no-repeat;
      z-index: 20;
      filter: invert(1);
    }

    .spider-top-left {
      top: -10px;
      left: -10px;
    }

    .spider-top-right {
      top: -10px;
      right: -10px;
      transform: scaleX(-1);
    }

    @keyframes slideInFromRight {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes slideInFromLeft {
      from {
        transform: translateX(-100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes slideInFromTop {
      from {
        transform: translateY(-100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes slideInFromBottom {
      from {
        transform: translateY(100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes scaleIn {
      from {
        transform: scale(0.8);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }

    @keyframes bounceIn {
      0% {
        transform: scale(0.3);
        opacity: 0;
      }
      50% {
        transform: scale(1.05);
      }
      70% {
        transform: scale(0.9);
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    .animate-slide-right {
      animation: slideInFromRight 0.4s ease-out;
    }

    .animate-slide-left {
      animation: slideInFromLeft 0.4s ease-out;
    }

    .animate-slide-top {
      animation: slideInFromTop 0.3s ease-out;
    }

    .animate-slide-bottom {
      animation: slideInFromBottom 0.3s ease-out;
    }

    .animate-scale {
      animation: scaleIn 0.3s ease-out;
    }

    .animate-bounce-in {
      animation: bounceIn 0.5s ease-out;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useRef, useEffect } = React;

    const Tv = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect>
        <polyline points="17 2 12 7 7 2"></polyline>
      </svg>
    );

    const Power = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path>
        <line x1="12" y1="2" x2="12" y2="12"></line>
      </svg>
    );

    const Maximize = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>
      </svg>
    );
const FeedbackSidebar = () => {
  const [feedbackMessage, setFeedbackMessage] = useState('');
  const [userEmail, setUserEmail] = useState('');
  const [userName, setUserName] = useState('');
  const [message, setMessage] = useState('');
  const [loading, setLoading] = useState(false);

  // EmailJS setup
  const EMAILJS_SERVICE_ID = 'service_ssge2ct';
  const EMAILJS_TEMPLATE_ID_USER = 'template_bwc9464';
  const EMAILJS_PUBLIC_KEY = 'SCwkGSYyGB5T0ifkK';
  const ADMIN_EMAIL = 'channelthenergy@gmail.com';
  const EMAILJS_TEMPLATE_ID_ADMIN = 'template_ocnbdtp'; // MAKE SURE THIS TEMPLATE ID IS CORRECT IN EMAILJS

  // Initialize EmailJS once
  useEffect(() => {
    if (window.emailjs) {
      window.emailjs.init(EMAILJS_PUBLIC_KEY);
      console.log('EmailJS initialized');
    }
  }, []);

  const handleSubmit = async (e) => {
    e.preventDefault();
    
    if (!feedbackMessage.trim() || !userEmail.trim()) {
      setMessage('Please fill in all fields');
      return;
    }

    setLoading(true);

    try {
      console.log('Starting feedback submission...');

      // 1. Save to Firebase
      console.log('Saving to Firebase...');
      const feedbackRef = window.firebaseDb.doc(
        window.db,
        'feedback',
        `${Date.now()}_${userEmail}`
      );
      
      await window.firebaseDb.setDoc(feedbackRef, {
        userId: userEmail,
        userName: userName || 'Anonymous',
        userEmail: userEmail,
        message: feedbackMessage,
        timestamp: new Date(),
        read: false
      });
      console.log('‚úì Firebase save successful');

      // 2. Send confirmation email to user via EmailJS
      console.log('Sending user confirmation email...');
      await window.emailjs.send(
        EMAILJS_SERVICE_ID,
        EMAILJS_TEMPLATE_ID_USER,
        {
          to_email: userEmail,
          user_name: userName || 'Viewer',
          user_message: feedbackMessage
        }
      );
      console.log('‚úì User confirmation email sent');

      // 3. Send notification email to admin via EmailJS
      console.log('Sending admin notification email...');
      await window.emailjs.send(
        EMAILJS_SERVICE_ID,
        EMAILJS_TEMPLATE_ID_ADMIN,
        {
          to_email: ADMIN_EMAIL,
          user_name: userName || 'Anonymous',
          user_email: userEmail,
          user_message: feedbackMessage
        }
      );
      console.log('‚úì Admin notification email sent');

      setMessage('‚úì Thank you! Your suggestion has been sent!');
      setFeedbackMessage('');
      setUserEmail('');
      setUserName('');
      
      setTimeout(() => {
        setMessage('');
      }, 4000);
    } catch (error) {
      console.error('Full error object:', error);
      console.error('Error message:', error.message);
      console.error('Error status:', error.status);
      
      setMessage(`‚úó Error: ${error.message || 'Failed to send. Check browser console.'}`);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="w-80 bg-gradient-to-b from-gray-900 to-gray-800 border-r-4 border-orange-500 p-6 overflow-y-auto max-h-screen animate-slide-left">
      <div className="mb-6">
        <h2 className="text-xl font-bold text-orange-400 font-mono mb-2">‚ú® FEEDBACK</h2>
        <p className="text-gray-300 text-sm font-mono">What should we air next?</p>
      </div>

      <form onSubmit={handleSubmit} className="space-y-4">
        <div>
          <label className="block text-orange-400 text-xs font-bold font-mono mb-2">YOUR NAME</label>
          <input
            type="text"
            value={userName}
            onChange={(e) => setUserName(e.target.value)}
            placeholder="Optional"
            className="w-full px-3 py-2 bg-gray-950 border-2 border-orange-500 rounded text-orange-400 font-mono text-sm focus:outline-none focus:border-orange-300"
          />
        </div>

        <div>
          <label className="block text-orange-400 text-xs font-bold font-mono mb-2">YOUR EMAIL</label>
          <input
            type="email"
            value={userEmail}
            onChange={(e) => setUserEmail(e.target.value)}
            placeholder="your@email.com"
            required
            className="w-full px-3 py-2 bg-gray-950 border-2 border-orange-500 rounded text-orange-400 font-mono text-sm focus:outline-none focus:border-orange-300"
          />
        </div>

        <div>
          <label className="block text-orange-400 text-xs font-bold font-mono mb-2">YOUR SUGGESTION</label>
          <textarea
            value={feedbackMessage}
            onChange={(e) => setFeedbackMessage(e.target.value)}
            placeholder="Tell us what content you'd like to see..."
            required
            className="w-full px-3 py-2 bg-gray-950 border-2 border-orange-500 rounded text-orange-400 font-mono text-sm focus:outline-none focus:border-orange-300 resize-none h-32"
          />
        </div>

        <button
          type="submit"
          disabled={loading}
          className="w-full py-2 bg-orange-600 hover:bg-orange-700 disabled:bg-gray-600 text-white font-bold font-mono rounded transition-colors"
        >
          {loading ? 'SENDING...' : 'SUBMIT'}
        </button>

        {message && (
          <div className={`p-3 rounded text-sm font-mono text-center animate-bounce-in ${message.includes('‚úì') ? 'bg-green-900 text-green-400' : 'bg-red-900 text-red-400'}`}>
            {message}
          </div>
        )}
      </form>
    </div>
  );
};

    const HalloweenCountdown = () => {
      const [countdown, setCountdown] = useState('');

      useEffect(() => {
        const updateCountdown = () => {
          const now = new Date();
          const currentYear = now.getFullYear();
          const halloween = new Date(currentYear, 9, 31);
          
          if (now > halloween) {
            halloween.setFullYear(currentYear + 1);
          }
          
          const diff = halloween - now;
          const days = Math.floor(diff / (1000 * 60 * 60 * 24));
          const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
          const minutes = Math.floor((diff / 1000 / 60) % 60);
          const seconds = Math.floor((diff / 1000) % 60);
          
          setCountdown(`${days}d ${hours}h ${minutes}m ${seconds}s`);
        };

        updateCountdown();
        const timer = setInterval(updateCountdown, 1000);
        return () => clearInterval(timer);
      }, []);

      return (
        <div className="flex items-center gap-2 bg-gray-900 px-4 py-2 rounded border-2 border-orange-500">
          <span className="text-orange-400 font-mono text-lg font-bold">üéÉ</span>
          <span className="text-orange-400 font-mono text-lg font-bold tracking-wider">
            {countdown}
          </span>
        </div>
      );
    };

    const PixelClock = () => {
      const [time, setTime] = useState(new Date());

      useEffect(() => {
        const timer = setInterval(() => {
          setTime(new Date());
        }, 1000);
        return () => clearInterval(timer);
      }, []);

      const formatTime = () => {
        return time.toLocaleTimeString('en-US', { 
          hour: '2-digit', 
          minute: '2-digit',
          second: '2-digit',
          hour12: true 
        });
      };

      return (
        <div className="flex items-center gap-2 bg-gray-900 px-4 py-2 rounded border-2 border-green-500">
          <div className="w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
          <span className="text-green-400 font-mono text-lg font-bold tracking-wider">
            {formatTime()}
          </span>
        </div>
      );
    };

    const CommunityHub = ({ currentUser, userStats }) => {
      const [activeTab, setActiveTab] = useState('badges');

      const allBadges = [
        { id: 1, name: 'First Watch', desc: 'Watch your first video', icon: 'üé¨', unlocked: userStats.videosWatched > 0 },
        { id: 2, name: 'Channel Surfer', desc: 'Visit all 6 channels', icon: 'üì∫', unlocked: userStats.channelsVisited >= 6 },
        { id: 3, name: '3 Day Streak', desc: 'Visit 3 days in a row', icon: 'üî•', unlocked: userStats.loginStreak >= 3 },
        { id: 4, name: 'Night Owl', desc: 'Watch after midnight', icon: 'ü¶â', unlocked: false },
        { id: 5, name: 'Marathon Master', desc: 'Watch 5+ videos', icon: 'üèÉ', unlocked: userStats.videosWatched >= 5 },
        { id: 6, name: 'Feedback Hero', desc: 'Submit a suggestion', icon: 'üí¨', unlocked: false }
      ];

      const topViewers = [
        { rank: 1, username: 'user42', views: 127, badge: 'üëë' },
        { rank: 2, username: 'user17', views: 98, badge: 'ü•à' },
        { rank: 3, username: 'user89', views: 75, badge: 'ü•â' },
        { rank: 4, username: 'user33', views: 54, badge: '‚≠ê' },
        { rank: 5, username: 'user91', views: 48, badge: '‚≠ê' }
      ];

      const challenges = [
        { id: 1, title: 'Cartoon Marathon', desc: 'Watch 3 Cartoon Network shows', progress: Math.min(userStats.videosWatched, 3), goal: 3 },
        { id: 2, title: 'Nostalgia Trip', desc: 'Watch a show from each channel', progress: userStats.channelsVisited, goal: 6 },
        { id: 3, title: 'Weekend Warrior', desc: 'Visit on Saturday & Sunday', progress: 0, goal: 2 }
      ];

      const globalStats = {
        totalViews: 15234,
        activeUsers: 42,
        mostWatchedChannel: 'CARTOON NETWORK'
      };

      return (
        <div className="max-w-7xl mx-auto w-full p-8 animate-scale">
          <div className="bg-gray-900 rounded-lg border-4 border-purple-500 p-6">
            <h2 className="text-3xl font-bold text-white font-mono mb-6 flex items-center gap-2">
              <span>üë•</span> COMMUNITY HUB
            </h2>

            <div className="flex gap-2 mb-6 overflow-x-auto">
              {['badges', 'leaderboard', 'challenges', 'stats'].map((tab) => (
                <button
                  key={tab}
                  onClick={() => setActiveTab(tab)}
                  className={`px-4 py-2 rounded font-mono font-bold whitespace-nowrap transition-all ${
                    activeTab === tab
                      ? 'bg-purple-600 text-white shadow-lg'
                      : 'bg-gray-800 text-gray-400 hover:bg-gray-700'
                  }`}
                >
                  {tab.toUpperCase()}
                </button>
              ))}
            </div>

            {activeTab === 'badges' && (
              <div className="grid grid-cols-2 md:grid-cols-3 gap-4 animate-slide-bottom">
                {allBadges.map((badge, index) => (
                  <div
                    key={badge.id}
                    style={{ animationDelay: `${index * 0.1}s` }}
                    className={`p-4 rounded-lg border-2 transition-all animate-scale ${
                      badge.unlocked
                        ? 'bg-gray-800 border-yellow-500 shadow-lg shadow-yellow-500/20'
                        : 'bg-gray-900 border-gray-700 opacity-50'
                    }`}
                  >
                    <div className="text-4xl mb-2">{badge.icon}</div>
                    <h4 className="text-white font-mono font-bold text-sm mb-1">{badge.name}</h4>
                    <p className="text-gray-400 font-mono text-xs">{badge.desc}</p>
                    {badge.unlocked && (
                      <span className="inline-block mt-2 text-yellow-500 font-mono text-xs">‚úì UNLOCKED</span>
                    )}
                  </div>
                ))}
              </div>
            )}

            {activeTab === 'leaderboard' && (
              <div className="space-y-2 animate-slide-bottom">
                <p className="text-gray-400 font-mono text-sm mb-4">üèÜ Top Viewers All-Time</p>
                {topViewers.map((user, index) => (
                  <div
                    key={user.rank}
                    style={{ animationDelay: `${index * 0.1}s` }}
                    className="p-4 rounded-lg bg-gray-800 flex items-center justify-between animate-slide-right"
                  >
                    <div className="flex items-center gap-4">
                      <span className="text-3xl font-bold font-mono text-white w-8">
                        {user.badge}
                      </span>
                      <div>
                        <p className="text-white font-mono font-bold">{user.username}</p>
                        <p className="text-gray-400 font-mono text-xs">{user.views} videos watched</p>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            )}

            {activeTab === 'challenges' && (
              <div className="space-y-4 animate-slide-bottom">
                <p className="text-gray-400 font-mono text-sm mb-4">üéØ Complete these goals!</p>
                {challenges.map((challenge, index) => (
                  <div 
                    key={challenge.id} 
                    style={{ animationDelay: `${index * 0.1}s` }}
                    className="bg-gray-800 p-4 rounded-lg border-2 border-blue-500 animate-slide-left"
                  >
                    <h4 className="text-white font-mono font-bold mb-1">{challenge.title}</h4>
                    <p className="text-gray-400 font-mono text-sm mb-3">{challenge.desc}</p>
                    <div className="flex items-center gap-2">
                      <div className="flex-1 h-4 bg-gray-900 rounded-full overflow-hidden">
                        <div 
                          className="h-full bg-blue-600 transition-all duration-500"
                          style={{ width: `${(challenge.progress / challenge.goal) * 100}%` }}
                        ></div>
                      </div>
                      <span className="text-gray-400 font-mono text-xs">{challenge.progress}/{challenge.goal}</span>
                    </div>
                  </div>
                ))}
              </div>
            )}

            {activeTab === 'stats' && (
              <div className="grid grid-cols-1 md:grid-cols-3 gap-4 animate-scale">
                <div className="bg-gray-800 p-6 rounded-lg border-2 border-green-500 text-center animate-bounce-in">
                  <p className="text-green-400 font-mono text-4xl font-bold mb-2">{globalStats.totalViews.toLocaleString()}</p>
                  <p className="text-gray-400 font-mono text-sm">TOTAL VIEWS</p>
                </div>
                <div className="bg-gray-800 p-6 rounded-lg border-2 border-blue-500 text-center animate-bounce-in" style={{ animationDelay: '0.1s' }}>
                  <p className="text-blue-400 font-mono text-4xl font-bold mb-2">{globalStats.activeUsers}</p>
                  <p className="text-gray-400 font-mono text-sm">ACTIVE USERS</p>
                </div>
                <div className="bg-gray-800 p-6 rounded-lg border-2 border-purple-500 text-center animate-bounce-in" style={{ animationDelay: '0.2s' }}>
                  <p className="text-purple-400 font-mono text-xl font-bold mb-2">{globalStats.mostWatchedChannel}</p>
                  <p className="text-gray-400 font-mono text-sm">TOP CHANNEL</p>
                </div>
              </div>
            )}
          </div>
        </div>
      );
    };

    const ProfilePage = ({ currentUser, userStats }) => {
      return (
        <div className="max-w-4xl mx-auto w-full p-8 animate-scale">
          <div className="bg-gray-900 rounded-lg border-4 border-blue-500 p-6">
            <h2 className="text-3xl font-bold text-white font-mono mb-6 flex items-center gap-2">
              <span>üë§</span> YOUR PROFILE
            </h2>

            <div className="bg-gray-800 p-6 rounded-lg border-2 border-blue-500 mb-6 animate-slide-top">
              <div className="flex items-center gap-6 mb-6">
                <div className="w-24 h-24 bg-blue-600 rounded-full flex items-center justify-center text-5xl">
                  üë§
                </div>
                <div>
                  <h3 className="text-3xl font-bold text-white font-mono">{currentUser}</h3>
                  <p className="text-blue-400 font-mono text-sm">Member since today</p>
                </div>
              </div>
              
              <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div className="bg-gray-900 p-4 rounded animate-bounce-in">
                  <p className="text-gray-400 font-mono text-xs mb-1">VIDEOS WATCHED</p>
                  <p className="text-white font-mono text-3xl font-bold">{userStats.videosWatched}</p>
                </div>
                <div className="bg-gray-900 p-4 rounded animate-bounce-in" style={{ animationDelay: '0.1s' }}>
                  <p className="text-gray-400 font-mono text-xs mb-1">WATCH STREAK</p>
                  <p className="text-white font-mono text-3xl font-bold flex items-center gap-2">
                    {userStats.loginStreak} <span className="text-orange-500">üî•</span>
                  </p>
                </div>
                <div className="bg-gray-900 p-4 rounded animate-bounce-in" style={{ animationDelay: '0.2s' }}>
                  <p className="text-gray-400 font-mono text-xs mb-1">CHANNELS VISITED</p>
                  <p className="text-white font-mono text-3xl font-bold">{userStats.channelsVisited}/6</p>
                </div>
                <div className="bg-gray-900 p-4 rounded animate-bounce-in" style={{ animationDelay: '0.3s' }}>
                  <p className="text-gray-400 font-mono text-xs mb-1">BADGES EARNED</p>
                  <p className="text-white font-mono text-3xl font-bold">{userStats.badgesEarned}/6</p>
                </div>
              </div>
            </div>

            <div className="bg-gray-800 p-6 rounded-lg border-2 border-blue-500 animate-slide-bottom">
              <h4 className="text-white font-mono font-bold text-xl mb-4">üì∫ WATCH HISTORY</h4>
              <div className="space-y-2">
                {userStats.watchHistory.map((item, index) => (
                  <div 
                    key={index} 
                    style={{ animationDelay: `${index * 0.1}s` }}
                    className="bg-gray-900 p-4 rounded flex justify-between items-center animate-slide-right"
                  >
                    <div>
                      <p className="text-white font-mono text-sm font-bold">{item.show}</p>
                      <p className="text-blue-400 font-mono text-xs">{item.channel}</p>
                    </div>
                    <p className="text-gray-500 font-mono text-xs">{item.date}</p>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      );
    };

    function App() {
      const [isLoggedIn, setIsLoggedIn] = useState(false);
      const [username, setUsername] = useState('');
      const [password, setPassword] = useState('');
      const [currentChannel, setCurrentChannel] = useState(1);
      const [tvOn, setTvOn] = useState(false);
      const [showChannelInfo, setShowChannelInfo] = useState(false);
      const [viewMode, setViewMode] = useState('channels');
      const [currentPage, setCurrentPage] = useState('home');
      const containerRef = useRef(null);
      const currentVideoRef = useRef(null);
      
      const [userStats, setUserStats] = useState({
        videosWatched: 0,
        channelsVisited: 1,
        loginStreak: 1,
        badgesEarned: 0,
        watchHistory: []
      });
      
      const [channelStates, setChannelStates] = useState({
        1: { videoIndex: 0, key: 0 },
        2: { videoIndex: 0, key: 0 },
        3: { videoIndex: 0, key: 0 },
        4: { videoIndex: 0, key: 0 },
        5: { videoIndex: 0, key: 0 },
        6: { videoIndex: 0, key: 0 },
      });

      const channels = [
        {
          id: 1,
          name: 'NICKELODEON',
          videos: [
            'https://dl.dropboxusercontent.com/scl/fi/0qhbxc2b1owo9sxcxa0jd/nick-halloween-block.mp4?rlkey=xly50ft4owo9zv45atkvonbzu',
            'https://dl.dropboxusercontent.com/scl/fi/0kx6kuhz626w2ff5otupp/716-1.mp4?rlkey=yna7t1kngnjopq9rwo0mej2dt',
            'https://dl.dropboxusercontent.com/scl/fi/t5pgzd4lqd10pmcnfi5su/Spongebob-The-Sponge-Who-Could-Fly.mp4?rlkey=qzvvvdihnqa82glbn2uy2ve3c',
            'https://dl.dropboxusercontent.com/scl/fi/jwhoxq74sdlgn6e3flsyg/Spongebob-Graveyard-Shift-Airing.mp4?rlkey=inxptpawamqbt1jwwoh9anol3',
            'https://dl.dropboxusercontent.com/scl/fi/dsi4esqdoz14952m4hzq4/Jimmy-Neutron-Marathon-June-21-2007-Disc-1.mp4?rlkey=zw3e6wshthzbvihrksm099nl0',
            'https://dl.dropboxusercontent.com/scl/fi/ikjg2dgcnou5voskzlali/7h9-F-ir1y-066p-r9n15-Ch-nn91-Ch-59r5-1.mp4?rlkey=ffmvjedudj9lu2kz5h3ihw6l4',
            'https://dl.dropboxusercontent.com/scl/fi/d0k90sw5vrzstwy10az71/716-2.mp4?rlkey=z4487ctdhorhj47514cnh5xq1',
            'https://dl.dropboxusercontent.com/scl/fi/66ntik0wfgr3qnlvoqwca/spongebobmarathon3.mp4?rlkey=me21yg7qn0cu2934aedw81sm8'
          ],
          schedule: [
            { title: 'Nick Halloween', videoIndex: 0, timestamp: 0 },
            { title: 'SpongeBash Special', videoIndex: 1, timestamp: 0 },
            { title: 'The Sponge Who Could Fly', videoIndex: 2, timestamp: 0 },
            { title: 'Graveyard Shift', videoIndex: 3, timestamp: 0 },
            { title: 'Jimmy Neutron Marathon', videoIndex: 4, timestamp: 0 },
            { title: 'Fairly Odd Parents Marathon', videoIndex: 5, timestamp: 0 },
            { title: 'SpongeBash Special 2', videoIndex: 6, timestamp: 0 },
            { title: 'SpongeBob Squarepants', videoIndex: 7, timestamp: 0 }
          ]
        },
        {
          id: 2,
          name: 'CARTOON NETWORK',
          videos: [
            'https://dl.dropboxusercontent.com/scl/fi/mmfepx71cwjj22dpv3xe5/CNHALLOWEEN2013.mp4?rlkey=4ye0iqkz5g43jdb5025c46ti5',
            'https://dl.dropboxusercontent.com/scl/fi/r0fm84sjufkqmzmdj8kjf/CNHALLOWEEN2.mp4?rlkey=lq40pe03g52ad3esbv0kjzh3y',
            'https://dl.dropboxusercontent.com/scl/fi/v88t8aoxt17uh1pqo42ch/live_user_livetoons10_1357606766.flv.mp4?rlkey=6w7m1ee8qfwstww3m8g25hmin',
            'https://dl.dropboxusercontent.com/scl/fi/wztbfclfemuhwyzmns5sr/live_user_livetoons10_1358211514.mp4?rlkey=6qbndxzqlwz3w2js4ggim7us2',
            'https://dl.dropboxusercontent.com/scl/fi/v5fizu9tb9yqbt3aj3ryk/live_user_livetoons10_1358816393.mp4?rlkey=55prgq8uk3ifvfw9vxgdvh3d3',
            'https://dl.dropboxusercontent.com/scl/fi/bn20pbb91s26lzbdmwvkh/live_user_livetoons10_1358899176.mp4?rlkey=92kekb0yvufcyh7j2clbrro8t',
            'https://dl.dropboxusercontent.com/scl/fi/fsrn8w8bxchbwecrogy16/live_user_livetoons10_1359421185.flv.mp4?rlkey=pek6z0ep4as5qkhvmoccf346t',
            'https://dl.dropboxusercontent.com/scl/fi/02rg3k5paas5fiexosn0m/VTS_01_1.mp4?rlkey=2id1qj9codi3ql3rdztvyvbly',
            'https://dl.dropboxusercontent.com/scl/fi/qovomj0q2v7rmu5gxboka/VTS_02_1.mp4?rlkey=9qbxn4wcnm8q2e3l2f3bjz66r',
            'https://dl.dropboxusercontent.com/scl/fi/21yepjjlti1jfz5grh8e2/VTS_02_2.mp4?rlkey=tstp73n8kyg8lb8ms2azjoadi',
            'https://dl.dropboxusercontent.com/scl/fi/ypz45myxzj356cd5mcjro/Tape-25-CARTOON-NETWORK-BOOMERANG-VOL.-2-2012-2013-2015-PART-1.mp4?rlkey=bdwdjccljg2ie4te0472o9ulw',
            'https://dl.dropboxusercontent.com/scl/fi/f60pc4ibdtx7wzw080gbw/GUMBALL2012.mp4?rlkey=380p342rpvocwqr30wxamzu7h',
            'https://dl.dropboxusercontent.com/scl/fi/qectf0uryqa7bytd3k1w3/REGSHOWTOTALDRAMA.mp4?rlkey=mnj154hvlqekt8vsvv1ifltpq'
          ],
          schedule: [
            { title: 'Regular Show', videoIndex: 0, timestamp: 0 },
            { title: 'Regular Show', videoIndex: 1, timestamp: 0 },
            { title: 'Regular Show', videoIndex: 2, timestamp: 0 },
            { title: 'The Amazing World Of Gumball', videoIndex: 3, timestamp: 0 },
            { title: 'Regular Show', videoIndex: 4, timestamp: 0 },
            { title: 'Chowder', videoIndex: 5, timestamp: 0 },
            { title: 'Chowder/Flapjack', videoIndex: 6, timestamp: 0 },
            { title: 'Flapjack', videoIndex: 7, timestamp: 0 },
            { title: 'Fosters Home for Imaginary Friends', videoIndex: 8, timestamp: 0 },
            { title: 'The Amazing World Of Gumball', videoIndex: 9, timestamp: 0 },
            { title: 'Regular Show', videoIndex: 10, timestamp: 0 },
            { title: 'Total Drama Island', videoIndex: 11, timestamp: 0 }
          ]
        },
        {
          id: 3,
          name: 'ADULT SWIM',
          videos: [
            'https://dl.dropboxusercontent.com/scl/fi/dlt8mx5z15ljrj1qhg1i5/ADULTSWIMHALLOWEEN.mp4?rlkey=k3vrq4rtujzcju64ub8ue94j0',
            'https://dl.dropboxusercontent.com/scl/fi/r3f7o7ij3p92wskw2txf2/z303-as026-_Adult_Swim_07.03.05-1.mp4?rlkey=ho4zmqo62b6pjfxcrbyemf477',
            'https://dl.dropboxusercontent.com/scl/fi/fhffgqtmtsl6wspuhwz75/VTS_01_3.mp4?rlkey=rm7c9qv28gawzrowp0nf87f8y',
            'https://dl.dropboxusercontent.com/scl/fi/ygggf6j7ca30z3j6g37a9/Family-Guy-Myspleen-003.mp4?rlkey=jjnzgc6fawyvu5ay11uhqljc7',
            'https://dl.dropboxusercontent.com/scl/fi/odjks7bqt4g1evpp35pi3/Family-Guy-Myspleen-007.mp4?rlkey=piqclzcgr4jzxnod6mh8m05ck',
            'https://dl.dropboxusercontent.com/scl/fi/qaac0rhj03k0rex4cf6oe/Family-Guy-Myspleen-74.mp4?rlkey=0vdk9u02pgqu7lqumdxg8a2fz'
          ],
          schedule: [
            { title: 'Family Guy', videoIndex: 0, timestamp: 0 },
            { title: 'American Dad', videoIndex: 1, timestamp: 0 },
            { title: 'Futurama/Aqua Teen Hunger Force', videoIndex: 2, timestamp: 0 },
            { title: 'Family Guy', videoIndex: 3, timestamp: 0 },
            { title: 'Family Guy', videoIndex: 4, timestamp: 0 }
          ]
        },
        {
          id: 4,
          name: 'DISNEY',
          videos: [
            'https://dl.dropboxusercontent.com/scl/fi/ze1gnxarh7aj8017z8qz3/DISNEY-HALLOWEEN.mp4?rlkey=fgfrxbtz7nhacxahb7zo8kqyt',
            'https://dl.dropboxusercontent.com/scl/fi/ojk72t6fu6xqsh6ifka6q/The-Suite-Life-of-Zack-amp-Cody-Big-Hair-and-Baseball-2009-11-16-0.mp4?rlkey=rfl2qldsr6tvct4i63ejjn1ol',
            'https://dl.dropboxusercontent.com/scl/fi/g327hug98rglpr0up48dx/Kick.Buttowski.Suburban.Daredevil.S01E39E40.1080p.DSNP.WEB-DL.AAC2.0.H.264-LAZY.ia.mp4?rlkey=0tzfsp95ifnf61zl5jqtcebsx',
            'https://dl.dropboxusercontent.com/scl/fi/40tp46lyqrw1d3oqx0o68/Kick.Buttowski.Suburban.Daredevil.S01E35E36.1080p.DSNP.WEB-DL.AAC2.0.H.264-LAZY.ia.mp4?rlkey=4ixrvdv5tzcan0s86nnqhn9ym',
            'https://dl.dropboxusercontent.com/scl/fi/u89sv95hzxwv61jwovv7a/Kick.Buttowski.Suburban.Daredevil.S01E21E22.1080p.DSNP.WEB-DL.AAC2.0.H.264-LAZY.mp4?rlkey=2snodpvkhaar86nhfuluw0tc3',
            'https://dl.dropboxusercontent.com/scl/fi/cmn3685iwl94qvrusl2wh/Good-Luck-Charlie-2010-S02E05.mp4?rlkey=3l9wogldnw0675004atsf5r1j',
            'https://dl.dropboxusercontent.com/scl/fi/bsnxykphfw9ct5u9d96wj/Good-Luck-Charlie-2010-S02E02.mp4?rlkey=y6k78wel1izytirw2q7vgnj1l',
            'https://dl.dropboxusercontent.com/scl/fi/kqrwtgsdmzogyphnx4swn/videoplayback-3.mp4?rlkey=99aqvdg830spb90g2e4vtt8m3',
            'https://dl.dropboxusercontent.com/scl/fi/iklezqsorssrijrlo6wh6/Good-Luck-Charlie-2010-S02E01.mp4?rlkey=dam28lh70i0zprb37f5565osx',
            'https://dl.dropboxusercontent.com/scl/fi/1ciywqxo7wfqmzx1bsck3/S1E13-Boss-Mabel.ia.mp4?rlkey=eseuishqjjy66aioo55clpb07',
            'https://dl.dropboxusercontent.com/scl/fi/vyr4pdh5pi8e7b28k3vqi/S1E12-Summerween.ia.mp4?rlkey=rgoh7q0oybimdgkeezp08yfus',
            'https://dl.dropboxusercontent.com/scl/fi/hse4mqdv02vl81ra1bts0/Phineas-and-Ferb-S02E21-E22-Lets-Take-a-Quiz-At-the-Car-Wash-1080p-WEB-DL-x265-HEVC-10bit-AAC-2.0-RCVR-UTR.mkv?rlkey=au6mvrf2itnchejqq1sog1sc2',
            'https://dl.dropboxusercontent.com/scl/fi/4q9jskzualah6fgvbjzhz/Phineas-and-Ferb-S02E30-E31-Not-Phineas-and-Ferb-Phineas-and-Ferb-Busters-1080p-WEB-DL-x265-HEVC-10bit-AAC-2.0-RCVR-UTR.mkv?rlkey=52cnp23o1t1yvtaz2m76akvtg',
            'https://dl.dropboxusercontent.com/scl/fi/8xv3xt1t7meslykrdzk64/ZEKEANDLUTHERPHINEAS.mp4?rlkey=zy55cslzmir8godu13r3iyzrx'
          ],
          schedule: [
            { title: 'Suite Life of Zack & Cody', videoIndex: 0, timestamp: 0 },
            { title: 'Kick Buttowski', videoIndex: 1, timestamp: 0 },
            { title: 'Kick Buttowski', videoIndex: 2, timestamp: 0 },
            { title: 'Kick Buttowski', videoIndex: 3, timestamp: 0 },
            { title: 'Good Luck Charlie', videoIndex: 4, timestamp: 0 },
            { title: 'Good Luck Charlie', videoIndex: 5, timestamp: 0 },
            { title: 'Good Luck Charlie', videoIndex: 6, timestamp: 0 },
            { title: 'Gravity Falls', videoIndex: 7, timestamp: 0 },
            { title: 'Gravity Falls', videoIndex: 8, timestamp: 0 },
            { title: 'Phineas and Ferb', videoIndex: 9, timestamp: 0 },
            { title: 'Phineas and Ferb', videoIndex: 10, timestamp: 0 },
            { title: 'Zeke and Luther', videoIndex: 11, timestamp: 0 }
          ]
        },
        {
          id: 5,
          name: 'NICK @ NITE',
          videos: [
            'https://dl.dropboxusercontent.com/scl/fi/6huq3fibn1zgn7qxcgiwp/NICKATNITE.mp4?rlkey=0mnnwkkf4s3ysfot6kgh5sqn0'
          ],
          schedule: [
            { title: 'Glenn Martin DDS/George Lopez/Home Improvement/Malcolm in the Middle', videoIndex: 0, timestamp: 0 }
          ]
        },
        {
          id: 6,
          name: 'NICK JR',
          videos: [
            'https://dl.dropboxusercontent.com/scl/fi/zleavpd6mrrnyjxvjhzo4/sdfghg.mp4?rlkey=pfg620cqgnwjzfbzxg9mex07r'
          ],
          schedule: [
            { title: 'Nick Jr Specials', videoIndex: 0, timestamp: 0 }
          ]
        }
      ];

      const handleScheduleClick = (channelId, videoIndex) => {
        const channel = channels.find(ch => ch.id === channelId);
        const show = channel.schedule.find(s => s.videoIndex === videoIndex);
        
        setCurrentChannel(channelId);
        setChannelStates(prev => ({
          ...prev,
          [channelId]: {
            videoIndex: videoIndex,
            key: prev[channelId].key + 1
          }
        }));
        setShowChannelInfo(true);
        if (!tvOn) {
          setTvOn(true);
        }

        const channelVisited = new Set([...Array(userStats.channelsVisited), channelId]).size;
        const newHistory = [{
          channel: channel.name,
          show: show.title,
          date: 'Just now'
        }, ...userStats.watchHistory.slice(0, 4)];

        setUserStats(prev => ({
          ...prev,
          videosWatched: prev.videosWatched + 1,
          channelsVisited: channelVisited,
          watchHistory: newHistory
        }));
      };

      const handleLogin = () => {
        if (username.trim() && password.trim()) {
          setIsLoggedIn(true);
          setUserStats({
            videosWatched: 0,
            channelsVisited: 1,
            loginStreak: 1,
            badgesEarned: 0,
            watchHistory: []
          });
        } else {
          alert('Please enter both username and password.');
        }
      };

      const handleChannelChange = (channelId) => {
        setCurrentChannel(channelId);
        setShowChannelInfo(true);
        setCurrentPage('home');
        
        const channelVisited = new Set([...Array(userStats.channelsVisited), channelId]).size;
        setUserStats(prev => ({
          ...prev,
          channelsVisited: channelVisited
        }));
      };

      const togglePower = () => {
        setTvOn(!tvOn);
      };

      const toggleFullscreen = () => {
        const element = containerRef.current;
        if (element) {
          if (element.requestFullscreen) {
            element.requestFullscreen();
          } else if (element.webkitRequestFullscreen) {
            element.webkitRequestFullscreen();
          } else if (element.mozRequestFullScreen) {
            element.mozRequestFullScreen();
          } else if (element.msRequestFullscreen) {
            element.msRequestFullscreen();
          }
        }
      };

      const currentChannelData = channels.find(ch => ch.id === currentChannel);

      const handleVideoEnd = () => {
        const channel = channels.find(ch => ch.id === currentChannel);
        const currentIndex = channelStates[currentChannel].videoIndex;
        const nextIndex = (currentIndex + 1) % channel.videos.length;
        
        setChannelStates(prev => ({
          ...prev,
          [currentChannel]: {
            videoIndex: nextIndex,
            key: prev[currentChannel].key + 1
          }
        }));

        setUserStats(prev => ({
          ...prev,
          videosWatched: prev.videosWatched + 1
        }));
      };

      useEffect(() => {
        if (showChannelInfo) {
          const timer = setTimeout(() => {
            setShowChannelInfo(false);
          }, 5000);
          return () => clearTimeout(timer);
        }
      }, [showChannelInfo]);

      useEffect(() => {
        if (currentVideoRef.current && tvOn) {
          currentVideoRef.current.play().catch(err => {
            console.log('Play was prevented:', err);
          });
        }
      }, [channelStates[currentChannel], tvOn]);

      if (!isLoggedIn) {
        return (
    <div className="min-h-screen bg-black flex items-center justify-center p-4">
  <div className="bg-purple-800 rounded-lg shadow-2xl p-8 w-full max-w-md border-4 border-orange-400 animate-bounce-in">
   <div className="flex items-center justify-center gap-3 mb-6">
      <img src="https://files.catbox.moe/cgnc4o.png" alt="Icon" style={{width: '50px', height: '50px', display: 'block'}} />
<h1 className="text-xl font-bold text-orange-300 eater-regular whitespace-nowrap">CHANGE THE CHANNEL</h1>
    </div>
              
             

              <div className="space-y-4">
                <div>
                  <label className="block text-purple-300 mb-2 font-mono text-sm">USERNAME</label>
                  <input
                    type="text"
                    value={username}
                    onChange={(e) => setUsername(e.target.value)}
                    onKeyPress={(e) => e.key === 'Enter' && handleLogin()}
                    className="w-full px-4 py-2 bg-gray-900 border-2 border-blue-500 rounded text-blue-300 focus:outline-none focus:border-blue-400 font-mono"
                    placeholder="Enter username"
                  />
                </div>
                <div>
                  <label className="block text-orange-300 mb-2 font-mono text-sm">PASSWORD</label>
                  <input
                    type="password"
                    value={password}
                    onChange={(e) => setPassword(e.target.value)}
                    onKeyPress={(e) => e.key === 'Enter' && handleLogin()}
                    className="w-full px-4 py-2 bg-gray-900 border-2 border-blue-500 rounded text-blue-300 focus:outline-none focus:border-blue-400 font-mono"
                    placeholder="Enter password"
                  />
                </div>
                <button
                  onClick={handleLogin}
                  className="w-full bg-orange-600 hover:bg-purple-700 text-white font-bold py-3 rounded font-mono transition-colors"
                >
                  SIGN IN
                </button>
              </div>
            </div>
          </div>
    
        );
      }

      const currentVideoUrl = currentChannelData.videos[channelStates[currentChannel].videoIndex];

      return (
        <div className="min-h-screen flex flex-col" style={{ 
          background: 'linear-gradient(135deg, #330066 0%, #FF6B00 50%, #330066 100%)'
        }}>
          <div className="max-w-7xl mx-auto w-full flex-1 p-8">
            <div className="flex justify-between items-center mb-8 animate-slide-top">
              <h1 className="text-4xl font-bold text-white font-mono flex items-center gap-3">
                <div className="w-10 h-10"><Tv /></div>
                CHANGE THE CHANNEL
              </h1>
              <div className="flex items-center gap-4">
                <button
                  onClick={() => setCurrentPage('home')}
                  className={`px-4 py-2 rounded font-mono font-bold transition-all ${
                    currentPage === 'home'
                      ? 'bg-white text-black shadow-lg'
                      : 'bg-gray-700 hover:bg-gray-600 text-white'
                  }`}
                >
                  HOME
                </button>
                <button
                  onClick={() => setCurrentPage('community')}
                  className={`px-4 py-2 rounded font-mono font-bold transition-all ${
                    currentPage === 'community'
                      ? 'bg-purple-600 text-white shadow-lg'
                      : 'bg-gray-700 hover:bg-gray-600 text-white'
                  }`}
                >
                  COMMUNITY
                </button>
                <button
                  onClick={() => setCurrentPage('profile')}
                  className={`px-4 py-2 rounded font-mono font-bold transition-all ${
                    currentPage === 'profile'
                      ? 'bg-blue-600 text-white shadow-lg'
                      : 'bg-gray-700 hover:bg-gray-600 text-white'
                  }`}
                >
                  PROFILE
                </button>
                <a 
                  href="https://discord.gg/qDJTKTgA" 
                  target="_blank" 
                  rel="noopener noreferrer"
                  className="flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded transition-colors"
                  title="Join our Discord"
                >
                  <svg className="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/>
                  </svg>
                  <span className="text-white font-mono font-bold">DISCORD</span>
                </a>
                <HalloweenCountdown />
                <PixelClock />
                <button
                  onClick={() => setIsLoggedIn(false)}
                  className="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded font-mono transition-colors"
                >
                  LOGOUT
                </button>
              </div>
            </div>

            {currentPage === 'community' && (
              <CommunityHub currentUser={username} userStats={userStats} />
            )}

            {currentPage === 'profile' && (
              <ProfilePage currentUser={username} userStats={userStats} />
            )}

            {currentPage === 'home' && (
              <div className="flex gap-8">
                <FeedbackSidebar />
                <div className="flex-1">
                  <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div className="lg:col-span-2">
                      <div className="bg-black p-4 rounded-lg shadow-2xl border-4 border-gray-800 tv-container animate-scale">
                        <div className="spider-corner spider-top-left"></div>
                        <div className="spider-corner spider-top-right"></div>

                        <div className="bg-black rounded-lg overflow-hidden relative" style={{ paddingBottom: '56.25%' }} ref={containerRef}>
                          {tvOn ? (
                            <video
                              key={`${currentChannel}-${channelStates[currentChannel].key}`}
                              ref={currentVideoRef}
                              className="absolute top-0 left-0 w-full h-full object-contain"
                              playsInline
                              muted={false}
                              crossOrigin="anonymous"
                              preload="metadata"
                              src={currentVideoUrl}
                              autoPlay
                              onEnded={handleVideoEnd}
                              onLoadedMetadata={(e) => {
                                e.target.play().catch(err => console.log('Play prevented:', err));
                              }}
                              onError={(e) => {
                                console.error('Video error:', e);
                              }}
                            />
                          ) : (
                            <div className="absolute top-0 left-0 w-full h-full flex items-center justify-center bg-gray-950"></div>
                          )}
                          
                          {showChannelInfo && (
                            <div className="absolute bottom-16 left-4 bg-black bg-opacity-70 px-4 py-2 rounded pointer-events-none z-10 animate-slide-bottom">
                              <p className="text-green-400 font-mono text-sm">CH {currentChannel}</p>
                              <p className="text-green-400 font-mono text-xs">{currentChannelData.name}</p>
                            </div>
                          )}
                        </div>
                        
                        <div className="mt-6 flex justify-center gap-4">
                          <button
                            onClick={togglePower}
                            className={`p-4 rounded-full transition-all ${
                              tvOn 
                                ? 'bg-green-600 hover:bg-green-700 shadow-lg shadow-green-500/50' 
                                : 'bg-red-600 hover:bg-red-700 shadow-lg shadow-red-500/50'
                            }`}
                          >
                            <div className="w-6 h-6 text-white"><Power /></div>
                          </button>
                          {tvOn && (
                            <button
                              onClick={toggleFullscreen}
                              className="p-4 rounded-full bg-blue-600 hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/50 animate-scale"
                            >
                              <div className="w-6 h-6 text-white"><Maximize /></div>
                            </button>
                          )}
                        </div>
                      </div>
                    </div>

                    <div className="space-y-4">
                      <div className="flex gap-2 mb-4 animate-slide-right">
                        <button
                          onClick={() => setViewMode('channels')}
                          className={`flex-1 py-2 px-4 rounded font-mono font-bold transition-all ${
                            viewMode === 'channels'
                              ? 'bg-white text-black shadow-lg'
                              : 'bg-gray-800 text-white hover:bg-gray-700'
                          }`}
                        >
                          CHANNELS
                        </button>
                        <button
                          onClick={() => setViewMode('schedule')}
                          className={`flex-1 py-2 px-4 rounded font-mono font-bold transition-all ${
                            viewMode === 'schedule'
                              ? 'bg-white text-black shadow-lg'
                              : 'bg-gray-800 text-white hover:bg-gray-700'
                          }`}
                        >
                          SCHEDULE
                        </button>
                      </div>

                      {viewMode === 'channels' ? (
                        <>
                          {channels.map((channel, index) => (
                            <button
                              key={channel.id}
                              style={{ animationDelay: `${index * 0.1}s` }}
                              onClick={() => handleChannelChange(channel.id)}
                              className={`w-full p-4 rounded-lg font-mono transition-all animate-slide-right ${
                                currentChannel === channel.id
                                  ? 'bg-white text-black shadow-lg shadow-white/50'
                                  : 'bg-gray-800 text-white hover:bg-gray-700 hover:shadow-lg hover:shadow-white/30'
                              }`}
                            >
                              <div className="flex items-center justify-between">
                                <div className="text-left">
                                  <p className="font-bold text-lg">{channel.name}</p>
                                </div>
                                <div className="text-3xl font-bold">{channel.id}</div>
                              </div>
                            </button>
                          ))}
                        </>
                      ) : (
                        <div className="animate-slide-left">
                          <h2 className="text-2xl font-bold text-white font-mono mb-4">SCHEDULE - CH {currentChannel}</h2>
                          <div className="space-y-2 max-h-[600px] overflow-y-auto">
                            {currentChannelData && currentChannelData.schedule.map((item, index) => (
                              <div
                                key={index}
                                style={{ animationDelay: `${index * 0.05}s` }}
                                onClick={() => handleScheduleClick(currentChannel, item.videoIndex)}
                                className="bg-gray-800 hover:bg-gray-700 p-4 rounded-lg cursor-pointer transition-colors border-l-4 border-orange-500 animate-slide-right"
                              >
                                <div className="flex justify-between items-center mb-1">
                                  <p className="text-white font-mono font-bold text-sm">{item.title}</p>
                                  <span className="text-orange-400 font-mono text-xs">#{index + 1}</span>
                                </div>
                                <p className="text-gray-400 font-mono text-xs">Click to watch</p>
                              </div>
                            ))}
                          </div>
                        </div>
                      )}
                    </div>
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>